<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jero Points</title>
<style>
Â  @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap');
Â  /* Paleta rosa y arcoiris */
Â  :root {
Â  Â  --rosa: #ff66b2;
Â  Â  --rosa-claro: #ffe6f0;
Â  Â  --rojo: #ff4d4d;
Â  Â  --naranja: #ff9933;
Â  Â  --amarillo: #ffcc00;
Â  Â  --verde: #33cc66;
Â  Â  --celeste: #66ccff;
Â  Â  --azul: #3399ff;
Â  Â  --lila: #cc99ff;
Â  Â  --gris-claro: #f9f9f9;
Â  Â  --gris-medio: #ddd;
Â  Â  --gris-oscuro: #666;
Â  }
Â  body {
Â  Â  font-family: 'Quicksand', sans-serif;
Â  Â  background: var(--rosa-claro);
Â  Â  color: #333;
Â  Â  margin: 0;
Â  Â  padding: 1rem 2rem 3rem 2rem;
Â  Â  min-height: 100vh;
Â  Â  user-select: none;
Â  }
Â  h1, h2, h3 {
Â  Â  color: var(--rosa);
Â  Â  margin-bottom: 0.5rem;
Â  Â  text-align: center;
Â  }
Â  h1 {
Â  Â  font-size: 2.8rem;
Â  Â  margin-bottom: 1rem;
Â  Â  text-shadow:
Â  Â  Â  1px 1px var(--rojo),
Â  Â  Â  2px 2px var(--naranja),
Â  Â  Â  3px 3px var(--amarillo),
Â  Â  Â  4px 4px var(--verde),
Â  Â  Â  5px 5px var(--celeste),
Â  Â  Â  6px 6px var(--azul),
Â  Â  Â  7px 7px var(--lila);
Â  }
Â  main {
Â  Â  max-width: 900px;
Â  Â  margin: auto;
Â  Â  background: white;
Â  Â  border-radius: 15px;
Â  Â  box-shadow:
Â  Â  Â  0 0 8px var(--rosa),
Â  Â  Â  0 0 25px var(--lila);
Â  Â  padding: 1.5rem 2rem 2rem 2rem;
Â  }

Â  /* Botones */
Â  button {
Â  Â  background: var(--rosa);
Â  Â  border: none;
Â  Â  color: white;
Â  Â  font-weight: 600;
Â  Â  padding: 0.45rem 1rem;
Â  Â  border-radius: 25px;
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s ease;
Â  Â  box-shadow: 0 0 8px var(--rosa);
Â  Â  user-select: none;
Â  }
Â  button:hover, button:focus {
Â  Â  background: var(--rojo);
Â  Â  outline: none;
Â  Â  box-shadow:
Â  Â  Â  0 0 15px var(--rojo),
Â  Â  Â  0 0 35px var(--naranja);
Â  }

Â  /* Botones info */
Â  .btn-info-list {
Â  Â  background: linear-gradient(90deg, var(--rojo), var(--naranja), var(--amarillo), var(--verde), var(--celeste), var(--azul), var(--lila));
Â  Â  font-weight: 700;
Â  Â  font-size: 0.95rem;
Â  Â  box-shadow: 0 0 12px var(--lila);
Â  Â  margin-right: 1rem;
Â  Â  user-select:none;
Â  }
Â  .btn-info-list:hover, .btn-info-list:focus {
Â  Â  filter: brightness(1.2);
Â  }

Â  /* Tabla ranking */
Â  table {
Â  Â  width: 100%;
Â  Â  border-collapse: collapse;
Â  Â  margin-top: 0.7rem;
Â  }
Â  caption {
Â  Â  text-align: left;
Â  Â  font-weight: 700;
Â  Â  color: var(--rosa);
Â  Â  margin-bottom: 0.3rem;
Â  }
Â  thead tr {
Â  Â  background: linear-gradient(90deg, var(--rojo), var(--naranja), var(--amarillo), var(--verde), var(--celeste), var(--azul), var(--lila));
Â  Â  color: white;
Â  Â  font-weight: 700;
Â  }
Â  tbody tr {
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s ease;
Â  }
Â  tbody tr:hover, tbody tr:focus-within {
Â  Â  background: var(--rosa-claro);
Â  }
Â  th, td {
Â  Â  padding: 0.5rem 0.75rem;
Â  Â  border-bottom: 1px solid var(--gris-medio);
Â  Â  text-align: left;
Â  }
Â  th:first-child, td:first-child {
Â  Â  text-align: center;
Â  Â  width: 5%;
Â  }
Â  th:nth-child(2), td:nth-child(2) {
Â  Â  width: 45%;
Â  }
Â  th:nth-child(3), td:nth-child(3) {
Â  Â  width: 20%;
Â  Â  text-align: center;
Â  }

Â  /* Medallas de los 3 primeros */
Â  .medalla {
Â  Â  font-size: 1.3rem;
Â  Â  margin-right: 8px;
Â  Â  vertical-align: middle;
Â  }
Â  .oro {
Â  Â  color: #FFD700;
Â  Â  text-shadow:
Â  Â  Â  1px 1px 2px #b38700;
Â  }
Â  .plata {
Â  Â  color: #C0C0C0;
Â  Â  text-shadow:
Â  Â  Â  1px 1px 2px #777;
Â  }
Â  .bronce {
Â  Â  color: #cd7f32;
Â  Â  text-shadow:
Â  Â  Â  1px 1px 2px #7a4f1e;
Â  }

Â  /* Detalle puntos */
Â  #detailsSection {
Â  Â  margin-top: 1.2rem;
Â  Â  background: var(--rosa-claro);
Â  Â  border-radius: 15px;
Â  Â  padding: 1rem;
Â  Â  box-shadow: 0 0 12px var(--lila);
Â  }
Â  #detailsBody td, #detailsBody th {
Â  Â  padding: 0.4rem 0.8rem;
Â  }
Â  #detailsBody tr:hover {
Â  Â  background: var(--rosa);
Â  Â  color: white;
Â  }
Â  #closeDetailsBtn {
Â  Â  margin-top: 0.7rem;
Â  Â  background: var(--lila);
Â  Â  color: var(--rosa);
Â  Â  font-weight: 700;
Â  }

Â  /* Info botones */
Â  #pointsInfoList {
Â  Â  margin-top: 0.8rem;
Â  Â  padding: 0.7rem 1rem;
Â  Â  background: var(--rosa-claro);
Â  Â  border-radius: 12px;
Â  Â  box-shadow: inset 0 0 8px var(--lila);
Â  Â  max-height: 180px;
Â  Â  overflow-y: auto;
Â  }

Â  /* Oculto y visible */
Â  .hidden {
Â  Â  display: none !important;
Â  }

Â  /* Responsive */
Â  @media (max-width: 600px) {
Â  Â  body {
Â  Â  Â  padding: 1rem 1rem 2rem 1rem;
Â  Â  }
Â  Â  main {
Â  Â  Â  padding: 1rem 1rem 1.5rem 1rem;
Â  Â  }
Â  Â  table, th, td {
Â  Â  Â  font-size: 0.9rem;
Â  Â  }
Â  Â  .btn-info-list {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  margin-bottom: 0.6rem;
Â  Â  Â  width: 48%;
Â  Â  }
Â  }
</style>
</head>
<body>

<main>
Â  <h1>Jero Points</h1>

Â  Â  <section aria-label="Tabla de posiciones de Jero Points">
Â  Â  <h2 class="section-title">Ranking de Jero Points âœ¨</h2>
Â  Â  <table aria-describedby="rankingDescription" role="table" style="table-layout:fixed;">
Â  Â  Â  <caption id="rankingDescription" class="sr-only">Tabla con nombres de hermanas y sus puntos</caption>
Â  Â  Â  <thead>
Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  <th style="width: 5%;">#</th>
Â  Â  Â  Â  Â  <th style="width: 45%;">Nombre</th>
Â  Â  Â  Â  Â  <th style="width: 20%;">Puntos</th>
Â  Â  Â  Â  </tr>
Â  Â  Â  </thead>
Â  Â  Â  <tbody id="rankingBody" role="rowgroup" aria-live="polite" aria-relevant="all">
Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  </table>

Â  Â  <div id="detailsSection" class="hidden" aria-live="polite" aria-atomic="true" style="margin-top:1.2rem;">
Â  Â  Â  <h3>Detalle de puntos</h3>
Â  Â  Â  <table role="table" aria-describedby="detailsDescription" style="table-layout: fixed; width: 100%;">
Â  Â  Â  Â  <caption id="detailsDescription" class="sr-only">Detalle de puntos ganados o perdidos por motivo y fecha</caption>
Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th style="width: 25%;">Fecha</th>
Â  Â  Â  Â  Â  Â  <th style="width: 15%;">Puntos</th>
Â  Â  Â  Â  Â  Â  <th style="width: 60%;">Motivo</th>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </thead>
Â  Â  Â  Â  <tbody id="detailsBody">
Â  Â  Â  Â  Â  Â  Â  Â  Â  </tbody>
Â  Â  Â  </table>
Â  Â  Â  <button id="closeDetailsBtn" style="margin-top:0.5rem;">Cerrar detalle</button>
Â  Â  </div>
Â  </section>

Â  <div style="margin-top:1.5rem; user-select:none; text-align:center;">
Â  Â  <button class="btn-info-list" id="showPointsInfoBtn" aria-expanded="false" aria-controls="pointsInfoList">Â¿CÃ³mo se ganan puntos?</button>
Â  Â  <button class="btn-info-list" id="showPointsLostBtn" aria-expanded="false" aria-controls="pointsInfoList">Â¿CÃ³mo se pierden puntos?</button>
Â  Â  <div id="pointsInfoList" class="points-list hidden" role="region" aria-live="polite" aria-atomic="true" style="margin-top:0.7rem;"></div>
Â  </div>
</main>

<script>
(() => {
Â  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwZWqahF0GquA-2wd__lj92IiS5BXwUvzO5CKZDyJv6V1YvlqzCpUaQZ6hDteHtctlhMw/exec"; // REEMPLAZA ESTA LÃNEA

Â  // Estado global y datos predefinidos
Â  let data = []; // Array de objetos {nombre, puntos, detalles: [{fecha, puntos, motivo}]}
Â  
Â  // Los motivos ahora estÃ¡n fijos en el cÃ³digo
Â  const puntosGanadosMotivos = [
Â  Â  { motivo: "Saber de memoria su parte", puntos: 5 },
Â  Â  { motivo: "Exponer bien", puntos: 3 },
Â  Â  { motivo: "Actitud positiva", puntos: 2 },
Â  Â  { motivo: "Por ayudar a una hermana", puntos: 2 },
Â  ];
Â  const puntosPerdidosMotivos = [
Â  Â  { motivo: "Faltar a reuniÃ³n sin aviso", puntos: 4 },
Â  Â  { motivo: "No preparar tarea", puntos: 3 },
Â  Â  { motivo: "Interrumpir a otra hermana", puntos: 1 },
Â  Â  { motivo: "Por llegar tarde", puntos: 3 },
Â  ];

Â  // Elementos DOM
Â  const rankingBody = document.getElementById("rankingBody");
Â  const detailsSection = document.getElementById("detailsSection");
Â  const detailsBody = document.getElementById("detailsBody");
Â  const closeDetailsBtn = document.getElementById("closeDetailsBtn");
Â  const showPointsInfoBtn = document.getElementById("showPointsInfoBtn");
Â  const showPointsLostBtn = document.getElementById("showPointsLostBtn");
Â  const pointsInfoList = document.getElementById("pointsInfoList");


Â  // -------------------------------------------------------------
Â  // Funciones de Carga de datos desde Google Sheets
Â  // -------------------------------------------------------------

Â  // Cargar todos los datos desde Google Sheets
Â  async function loadData() {
Â  Â  try {
Â  Â  Â  const response = await fetch(SCRIPT_URL);
Â  Â  Â  const rawData = await response.json();
Â  Â  Â  
Â  Â  Â  const processedData = rawData.reduce((acc, row) => {
Â  Â  Â  Â  const nombre = row.Nombre;
Â  Â  Â  Â  const puntos = Number(row.Puntos);
Â  Â  Â  Â  const motivo = row.Motivo;
Â  Â  Â  Â  const fecha = row.Fecha;
Â  Â  Â  Â  
Â  Â  Â  Â  let user = acc.find(u => u.nombre.toLowerCase() === nombre.toLowerCase());
Â  Â  Â  Â  if (!user) {
Â  Â  Â  Â  Â  user = { nombre: nombre, puntos: 0, detalles: [] };
Â  Â  Â  Â  Â  acc.push(user);
Â  Â  Â  Â  }
Â  Â  Â  Â  user.puntos += puntos;
Â  Â  Â  Â  user.detalles.push({ fecha, puntos, motivo });
Â  Â  Â  Â  return acc;
Â  Â  Â  }, []);
Â  Â  Â  
Â  Â  Â  data = processedData;
Â  Â  Â  
Â  Â  Â  renderRanking();

Â  Â  } catch (error) {
Â  Â  Â  console.error('Error al cargar datos desde Google Sheets:', error);
Â  Â  Â  alert("No se pudieron cargar los datos desde Google Sheets. Revisa la URL y los permisos.");
Â  Â  Â  data = [];
Â  Â  }
Â  }


Â  // Renderizar ranking (ordenado)
Â  function renderRanking() {
Â  Â  // Ordenar descendente por puntos
Â  Â  data.sort((a, b) => b.puntos - a.puntos);
Â  Â  rankingBody.innerHTML = "";
Â  Â  data.forEach((user, i) => {
Â  Â  Â  const tr = document.createElement("tr");
Â  Â  Â  tr.setAttribute("tabindex", "0");
Â  Â  Â  tr.setAttribute("role", "row");
Â  Â  Â  tr.dataset.nombre = user.nombre;

Â  Â  Â  const tdPos = document.createElement("td");
Â  Â  Â  tdPos.textContent = i + 1;
Â  Â  Â  tdPos.setAttribute("aria-label", "PosiciÃ³n");
Â  Â  Â  if (i === 0) tdPos.innerHTML = '<span class="medalla oro">ðŸ¥‡</span>';
Â  Â  Â  else if (i === 1) tdPos.innerHTML = '<span class="medalla plata">ðŸ¥ˆ</span>';
Â  Â  Â  else if (i === 2) tdPos.innerHTML = '<span class="medalla bronce">ðŸ¥‰</span>';

Â  Â  Â  const tdNombre = document.createElement("td");
Â  Â  Â  tdNombre.textContent = user.nombre;

Â  Â  Â  const tdPuntos = document.createElement("td");
Â  Â  Â  tdPuntos.textContent = user.puntos;
Â  Â  Â  tdPuntos.style.color = user.puntos >= 0 ? 'green' : 'red';
Â  Â  Â  if (user.puntos === 0) tdPuntos.style.color = '#666';

Â  Â  Â  tr.appendChild(tdPos);
Â  Â  Â  tr.appendChild(tdNombre);
Â  Â  Â  tr.appendChild(tdPuntos);

Â  Â  Â  rankingBody.appendChild(tr);
Â  Â  });
Â  }

Â  // Mostrar detalle puntos al hacer click en fila ranking
Â  rankingBody.addEventListener("click", (e) => {
Â  Â  let tr = e.target.closest("tr");
Â  Â  if (!tr) return;
Â  Â  const nombre = tr.dataset.nombre;
Â  Â  if (!nombre) return;
Â  Â  showDetails(nombre);
Â  });
Â  rankingBody.addEventListener("keydown", (e) => {
Â  Â  if (e.key === "Enter" || e.key === " ") {
Â  Â  Â  let tr = e.target.closest("tr");
Â  Â  Â  if (!tr) return;
Â  Â  Â  const nombre = tr.dataset.nombre;
Â  Â  Â  if (!nombre) return;
Â  Â  Â  showDetails(nombre);
Â  Â  }
Â  });

Â  // Mostrar detalle de puntos para una hermana
Â  function showDetails(nombre) {
Â  Â  detailsBody.innerHTML = "";
Â  Â  const user = data.find((d) => d.nombre === nombre);
Â  Â  if (!user) return;
Â  Â  if (user.detalles.length === 0) {
Â  Â  Â  const tr = document.createElement("tr");
Â  Â  Â  const td = document.createElement("td");
Â  Â  Â  td.colSpan = 3;
Â  Â  Â  td.textContent = "No hay registros de puntos para esta hermana.";
Â  Â  Â  td.style.fontStyle = "italic";
Â  Â  Â  tr.appendChild(td);
Â  Â  Â  detailsBody.appendChild(tr);
Â  Â  } else {
Â  Â  Â  user.detalles.forEach((det) => {
Â  Â  Â  Â  const tr = document.createElement("tr");
Â  Â  Â  Â  const tdFecha = document.createElement("td");
Â  Â  Â  Â  tdFecha.textContent = det.fecha;
Â  Â  Â  Â  const tdPuntos = document.createElement("td");
Â  Â  Â  Â  tdPuntos.textContent = det.puntos > 0 ? "+" + det.puntos : det.puntos;
Â  Â  Â  Â  tdPuntos.style.color = det.puntos > 0 ? "green" : "red";
Â  Â  Â  Â  const tdMotivo = document.createElement("td");
Â  Â  Â  Â  tdMotivo.textContent = det.motivo;

Â  Â  Â  Â  tr.appendChild(tdFecha);
Â  Â  Â  Â  tr.appendChild(tdPuntos);
Â  Â  Â  Â  tr.appendChild(tdMotivo);
Â  Â  Â  Â  detailsBody.appendChild(tr);
Â  Â  Â  });
Â  Â  }
Â  Â  detailsSection.classList.remove("hidden");
Â  Â  detailsSection.focus();
Â  }
Â  closeDetailsBtn.addEventListener("click", () => {
Â  Â  detailsSection.classList.add("hidden");
Â  });


Â  // Render info lista motivos
Â  function renderInfoList(ganan = true) {
Â  Â  pointsInfoList.innerHTML = "";
Â  Â  pointsInfoList.classList.remove("hidden");
Â  Â  let motivos = ganan ? puntosGanadosMotivos : puntosPerdidosMotivos;
Â  Â  motivos = motivos.slice().sort((a,b) => b.puntos - a.puntos);
Â  Â  motivos.forEach((item) => {
Â  Â  Â  const p = document.createElement("p");
Â  Â  Â  p.textContent = `${ganan ? "+" : "-"}${item.puntos} pts - ${item.motivo}`;
Â  Â  Â  pointsInfoList.appendChild(p);
Â  Â  });
Â  }

Â  // Botones mostrar info
Â  showPointsInfoBtn.addEventListener("click", () => {
Â  Â  const expanded = showPointsInfoBtn.getAttribute("aria-expanded") === "true";
Â  Â  if (expanded) {
Â  Â  Â  pointsInfoList.classList.add("hidden");
Â  Â  Â  showPointsInfoBtn.setAttribute("aria-expanded", "false");
Â  Â  Â  showPointsInfoBtn.textContent = "Â¿CÃ³mo se ganan puntos?";
Â  Â  Â  showPointsLostBtn.textContent = "Â¿CÃ³mo se pierden puntos?";
Â  Â  } else {
Â  Â  Â  renderInfoList(true);
Â  Â  Â  pointsInfoList.classList.remove("hidden");
Â  Â  Â  showPointsInfoBtn.setAttribute("aria-expanded", "true");
Â  Â  Â  showPointsInfoBtn.textContent = "Ocultar motivos que ganan puntos";
Â  Â  Â  showPointsLostBtn.textContent = "Â¿CÃ³mo se pierden puntos?";
Â  Â  Â  showPointsLostBtn.setAttribute("aria-expanded", "false");
Â  Â  Â  pointsInfoList.style.border = `2px solid var(--verde)`;
Â  Â  }
Â  });
Â  showPointsLostBtn.addEventListener("click", () => {
Â  Â  const expanded = showPointsLostBtn.getAttribute("aria-expanded") === "true";
Â  Â  if (expanded) {
Â  Â  Â  pointsInfoList.classList.add("hidden");
Â  Â  Â  showPointsLostBtn.setAttribute("aria-expanded", "false");
Â  Â  Â  showPointsLostBtn.textContent = "Â¿CÃ³mo se pierden puntos?";
Â  Â  Â  showPointsInfoBtn.textContent = "Â¿CÃ³mo se ganan puntos?";
Â  Â  } else {
Â  Â  Â  renderInfoList(false);
Â  Â  Â  pointsInfoList.classList.remove("hidden");
Â  Â  Â  showPointsLostBtn.setAttribute("aria-expanded", "true");
Â  Â  Â  showPointsLostBtn.textContent = "Ocultar motivos que pierden puntos";
Â  Â  Â  showPointsInfoBtn.textContent = "Â¿CÃ³mo se ganan puntos?";
Â  Â  Â  showPointsInfoBtn.setAttribute("aria-expanded", "false");
Â  Â  Â  pointsInfoList.style.border = `2px solid var(--rojo)`;
Â  Â  }
Â  });

Â  // Carga inicial
Â  window.addEventListener('load', loadData);
Â  detailsSection.classList.add("hidden");
Â  pointsInfoList.classList.add("hidden");

})();
</script>
</body>
</html>
